# 배포 전 체크리스트 가이드

**프로젝트 코드**: ATCMP-2026  
**작성일**: 2025-01-27  
**버전**: 1.0

---

## 📋 개요

이 문서는 배포 전 체크리스트의 자동화 시스템과 수동 확인 항목을 설명합니다. 배포 전 체크리스트는 코드 품질, 보안, 성능 등을 확인하여 안정적인 배포를 보장합니다.

---

## 🔄 자동화된 체크리스트

### 실행 방법

**Staging 배포 전**:
```bash
./scripts/pre-deployment-check.sh staging
```

**Production 배포 전**:
```bash
./scripts/pre-deployment-check.sh production
```

### 자동 검사 항목

#### 1. 코드 품질

**ESLint 검사**:
- 목적: 코드 스타일 및 품질 검사
- 실패 시: Production 배포 차단
- 수정 방법: `pnpm lint --fix` 실행

**TypeScript 타입 체크**:
- 목적: 타입 오류 검사
- 실패 시: Production 배포 차단
- 수정 방법: 타입 오류 수정

**Prettier 포맷팅 체크**:
- 목적: 코드 포맷팅 일관성 검사
- 실패 시: 경고만 표시 (배포 차단 아님)
- 수정 방법: `pnpm format` 실행

**테스트 실행**:
- 목적: 단위 테스트 및 통합 테스트 실행
- 실패 시: 배포 차단
- 수정 방법: 실패한 테스트 수정

**빌드 체크**:
- 목적: 프로덕션 빌드 성공 확인
- 실패 시: 배포 차단
- 수정 방법: 빌드 오류 수정

#### 2. 보안

**보안 취약점 검사**:
- 목적: npm 패키지 취약점 검사
- 실패 시: Production 배포 차단
- 수정 방법: `pnpm audit fix` 실행 또는 패키지 업데이트

**환경 변수 검증**:
- 목적: 필수 환경 변수 존재 확인
- 실패 시: Production 배포 차단
- 수정 방법: 환경 변수 설정 확인

#### 3. 데이터베이스

**마이그레이션 파일 확인**:
- 목적: 마이그레이션 파일 존재 확인
- 실패 시: 경고만 표시 (배포 차단 아님)
- 수정 방법: 마이그레이션 파일 생성

#### 4. 성능

**번들 크기 확인**:
- 목적: 번들 크기 모니터링
- 실패 시: 경고만 표시 (배포 차단 아님)
- 수정 방법: 코드 스플리팅, 불필요한 의존성 제거

#### 5. 의존성

**의존성 잠금 파일 확인**:
- 목적: 재현 가능한 빌드 보장
- 실패 시: 경고만 표시
- 수정 방법: `pnpm install` 실행

---

## ✅ 수동 확인 항목

### 필수 확인사항

배포 전에 반드시 확인해야 할 항목:

#### 1. 변경사항 검토
- [ ] 변경된 파일 목록 확인
- [ ] 주요 변경사항 이해
- [ ] Breaking Change 여부 확인

#### 2. 핵심 기능 테스트
- [ ] 로그인/로그아웃 기능 테스트
- [ ] 대상자 등록 기능 테스트
- [ ] 기기 대여 기능 테스트
- [ ] 반납 처리 기능 테스트

#### 3. 환경 변수 확인
- [ ] Staging/Production 환경 변수 설정 확인
- [ ] 새로운 환경 변수 추가 여부 확인
- [ ] 환경 변수 값 검증

#### 4. 롤백 계획 확인
- [ ] 롤백 절차 확인
- [ ] 이전 배포 버전 확인
- [ ] 롤백 시 영향 범위 확인

### 선택 확인사항

가능하면 확인하는 것이 좋은 항목:

#### 1. 성능 테스트
- [ ] 페이지 로딩 시간 확인
- [ ] API 응답 시간 확인
- [ ] Core Web Vitals 확인

#### 2. 보안 테스트
- [ ] 인증/인가 로직 확인
- [ ] 입력 검증 확인
- [ ] XSS/CSRF 방지 확인

#### 3. 접근성 테스트
- [ ] 키보드 네비게이션 확인
- [ ] 스크린 리더 호환성 확인
- [ ] 색상 대비 확인

---

## 🔧 CI/CD 통합

### GitHub Actions 통합

배포 전 체크리스트는 자동으로 실행됩니다:

**Staging 배포**:
- `develop` 브랜치에 push 시 자동 실행
- 체크리스트 실패 시 배포 차단

**Production 배포**:
- `main` 브랜치에 push 시 자동 실행
- 체크리스트 실패 시 배포 차단
- 승인 전 체크리스트 결과 확인

### 체크리스트 리포트

체크리스트 실행 후 생성되는 리포트:

**위치**: `deployment-checklist.md`

**포함 내용**:
- 자동 검사 결과
- 실패한 항목 상세 정보
- 수동 확인 항목 체크리스트

---

## 🚨 체크리스트 실패 시 대응

### 자동 검사 실패

**ESLint/TypeScript 실패**:
1. 로컬에서 오류 확인
2. 오류 수정
3. 다시 커밋 및 푸시

**테스트 실패**:
1. 실패한 테스트 확인
2. 테스트 수정 또는 버그 수정
3. 다시 커밋 및 푸시

**보안 취약점 발견**:
1. 취약점 상세 확인
2. 패키지 업데이트 또는 수정
3. 다시 커밋 및 푸시

**환경 변수 누락**:
1. GitHub Secrets 또는 Vercel 환경 변수 확인
2. 누락된 환경 변수 추가
3. 다시 배포 시도

### 수동 확인 실패

수동 확인 항목이 완료되지 않은 경우:
- Production 배포는 승인하지 않음
- Staging에서 추가 테스트 수행
- 문제 해결 후 재배포

---

## 📊 체크리스트 결과 해석

### 모든 항목 통과

✅ **배포 진행 가능**:
- 모든 자동 검사 통과
- 수동 확인 항목 완료
- 배포 승인 가능

### 일부 항목 경고

⚠️ **조건부 배포 가능**:
- 필수 항목 모두 통과
- 일부 선택 항목 경고
- 배포 진행 가능하나 경고 항목 확인 권장

### 필수 항목 실패

❌ **배포 차단**:
- 필수 항목 중 하나 이상 실패
- 배포 자동 차단
- 문제 해결 후 재배포

---

## 📚 참고 자료

- [배포 프로세스 가이드](./deployment-process.md)
- [프로덕션 배포 승인 프로세스 가이드](./production-deployment-approval-guide.md)
- [Staging 환경 설정 가이드](./staging-environment-guide.md)

---

## ✅ 체크리스트 템플릿

배포 전에 이 체크리스트를 확인하세요:

### 자동 검사 결과
- [ ] ESLint 통과
- [ ] TypeScript 타입 체크 통과
- [ ] 테스트 통과
- [ ] 빌드 성공
- [ ] 보안 취약점 검사 통과
- [ ] 환경 변수 확인 완료

### 수동 확인 항목
- [ ] 변경사항 검토 완료
- [ ] 핵심 기능 테스트 완료
- [ ] 환경 변수 확인 완료
- [ ] 롤백 계획 확인 완료

---

**마지막 업데이트**: 2025-01-27  
**다음 검토일**: 2025-02-03

