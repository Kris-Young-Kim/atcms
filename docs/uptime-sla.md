# 가동률 목표 및 SLA 문서

**프로젝트 코드**: ATCMP-2026  
**작성일**: 2025-01-27  
**버전**: 1.0

---

## 📋 개요

이 문서는 AT-CMP 프로젝트의 가동률(Uptime) 목표 및 Service Level Agreement (SLA)를 정의합니다. 시스템의 안정성과 가용성을 보장하기 위한 기준을 제시합니다.

---

## 🎯 가동률 목표

### 전체 목표

- **월간 가동률**: 99.5% 이상
- **연간 가동률**: 99.5% 이상
- **최대 허용 다운타임**: 월 3.6시간 (약 216분)

### 계산 방법

```
가동률 (%) = (전체 시간 - 다운타임) / 전체 시간 × 100

예시:
- 월간 총 시간: 30일 × 24시간 = 720시간
- 목표 가동률: 99.5%
- 허용 다운타임: 720시간 × (1 - 0.995) = 3.6시간 = 216분
```

---

## 📊 가동률 측정 기준

### 측정 범위

**포함 항목**:
- 프로덕션 환경 (production)
- API 엔드포인트 응답 가능 여부
- 데이터베이스 연결 상태
- 핵심 기능 동작 여부

**제외 항목**:
- 계획된 유지보수 시간
- 예정된 배포 시간 (5분 이내)
- 예정된 업데이트 시간

### 헬스 체크 기준

**헬스 체크 엔드포인트**: `/api/health`

**정상 상태 조건**:
- HTTP 상태 코드: `200 OK`
- 응답 시간: < 2초
- 응답 본문:
  ```json
  {
    "status": "ok",
    "timestamp": "2025-01-27T12:00:00.000Z",
    "uptime": "12345.67 seconds"
  }
  ```

**비정상 상태 판정**:
- HTTP 상태 코드: `5xx` 또는 타임아웃
- 응답 시간: > 5초
- 연결 실패

### 계획된 유지보수 시간

**정기 유지보수**:
- 매주 일요일 02:00-04:00 (KST)
- 예정된 배포 시간 (5분 이내)

**계획된 유지보수 통지**:
- 최소 24시간 전에 알림 발송
- 최소 1주일 전에 공지 (주요 업데이트)

---

## 📈 가동률 모니터링

### 모니터링 도구

#### 1. Vercel Analytics

**자동 모니터링**:
- Vercel Dashboard → Analytics → Uptime
- 실시간 상태 확인
- 다운타임 자동 감지

**알림 설정**:
- 다운타임 발생 시 Email 알림
- Slack 통합 (선택사항)

#### 2. 외부 모니터링 서비스 (권장)

**추천 서비스**:
- **UptimeRobot** (무료 플랜 가능)
  - 5분마다 헬스 체크
  - Email/Slack 알림
  - 대시보드 제공
- **Pingdom** (유료)
  - 더 자세한 분석
  - 글로벌 모니터링
- **StatusCake** (무료 플랜 가능)
  - 다양한 알림 옵션
  - 리포트 생성

**설정 방법**:
1. 모니터링 서비스 계정 생성
2. 헬스 체크 URL 추가: `https://your-domain.com/api/health`
3. 체크 주기 설정: 5분마다
4. 알림 설정: Email, Slack

#### 3. 커스텀 모니터링

**GitHub Actions Workflow**:
- 주기적으로 헬스 체크 실행
- 상태를 이슈로 기록
- 알림 발송

---

## 🚨 다운타임 대응 절차

### 다운타임 감지 시

1. **즉시 확인** (5분 내):
   - Vercel Dashboard에서 상태 확인
   - 헬스 체크 엔드포인트 직접 확인
   - 에러 로그 확인

2. **원인 파악**:
   - Vercel 로그 확인
   - Supabase 상태 확인
   - 외부 서비스 (Clerk, Sentry) 상태 확인

3. **대응 조치**:
   - 자동 복구 대기 (5분)
   - 수동 개입 필요 시 롤백 검토
   - 팀에 상황 공유

### 다운타임 분류

**P0 (치명적)**:
- 전체 서비스 다운
- 핵심 기능 불가
- 대응 시간: 즉시

**P1 (높음)**:
- 일부 기능 불가
- 대응 시간: 1시간 내

**P2 (중간)**:
- 성능 저하
- 대응 시간: 4시간 내

**P3 (낮음)**:
- 사소한 문제
- 대응 시간: 다음 업데이트

---

## 📊 가동률 리포트

### 월간 가동률 리포트

**포함 내용**:
- 월간 가동률 통계
- 다운타임 발생 내역
- 평균 응답 시간
- 계획된 유지보수 시간

**생성 방법**:
1. 모니터링 서비스에서 리포트 다운로드
2. Vercel Analytics 데이터 수집
3. Excel 또는 Google Sheets로 정리

**공유 주기**:
- 매월 첫째 주에 전월 리포트 공유
- 팀 회의에서 리뷰

### 연간 가동률 리포트

**포함 내용**:
- 연간 가동률 통계
- 목표 달성 여부
- 개선 사항 및 계획

**생성 방법**:
- 월간 리포트를 집계하여 연간 리포트 생성

---

## ✅ SLA 준수 관리

### 가동률 목표 미달 시

**99.5% 미달 시**:
1. 원인 분석 리포트 작성
2. 개선 계획 수립
3. 예방 조치 실행

**99.0% 미달 시**:
1. 긴급 회의 소집
2. 근본 원인 분석
3. 즉시 개선 조치

### 목표 달성 보상

**99.5% 이상 달성 시**:
- 팀 성과 인정
- 개선 사항 문서화
- 베스트 프랙티스 공유

---

## 🔧 가동률 개선 전략

### 예방 조치

1. **자동 복구 시스템**:
   - Vercel 자동 재시작
   - 헬스 체크 기반 자동 복구

2. **모니터링 강화**:
   - 실시간 알림 설정
   - 예측 모니터링 (성능 저하 조기 감지)

3. **배포 프로세스 개선**:
   - 배포 전 체크리스트 실행
   - 배포 후 검증 강화
   - 롤백 계획 수립

4. **인프라 최적화**:
   - CDN 활용
   - 데이터베이스 최적화
   - 캐싱 전략 개선

---

## 📋 체크리스트

### 초기 설정
- [ ] 헬스 체크 엔드포인트 확인 (`/api/health`)
- [ ] 외부 모니터링 서비스 설정
- [ ] 알림 설정 (Email, Slack)
- [ ] 가동률 목표 및 SLA 문서화

### 정기 확인
- [ ] 일일 가동률 확인
- [ ] 월간 가동률 리포트 생성
- [ ] 다운타임 발생 시 대응 절차 준수
- [ ] 가동률 개선 전략 검토

---

## 📚 참고 자료

- [Vercel Uptime 문서](https://vercel.com/docs/analytics/uptime)
- [헬스 체크 엔드포인트](../web/src/app/api/health/route.ts)
- [배포 프로세스](./deployment-process.md)
- [모니터링 대시보드 가이드](./monitoring-dashboard-guide.md)

---

**마지막 업데이트**: 2025-01-27  
**다음 검토일**: 2025-02-03

