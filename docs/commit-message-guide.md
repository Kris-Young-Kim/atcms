# AT-CMP 커밋 메시지 가이드

**프로젝트 코드**: ATCMP-2026  
**작성일**: 2025-11-01  
**버전**: 1.0

---

## 📋 목차

1. [커밋 메시지 형식](#커밋-메시지-형식)
2. [TYPE 종류](#type-종류)
3. [좋은 커밋 메시지 예시](#좋은-커밋-메시지-예시)
4. [나쁜 커밋 메시지 예시](#나쁜-커밋-메시지-예시)
5. [커밋 템플릿 사용법](#커밋-템플릿-사용법)
6. [베스트 프랙티스](#베스트-프랙티스)

---

## 커밋 메시지 형식

### 기본 형식

```
[TYPE] ATCMP-번호: 간단한 설명

상세 설명 (옵션)

- 변경 사항 1
- 변경 사항 2
```

### GitHub Issues 형식 (권장)

```
[TYPE] #이슈번호: 간단한 설명

상세 설명 (옵션)

- 변경 사항 1
- 변경 사항 2
```

**참고**: GitHub Issues 형식(`#이슈번호`)을 사용하면 커밋이 자동으로 해당 이슈에 연결됩니다.

---

## TYPE 종류

| TYPE | 설명 | 예시 |
|------|------|------|
| `feat` | 새로운 기능 추가 | `feat #123: 대상자 등록 API 구현` |
| `fix` | 버그 수정 | `fix #234: API 에러 핸들링 개선` |
| `refactor` | 코드 리팩토링 (기능 변경 없음) | `refactor #345: 클라이언트 폼 컴포넌트 리팩토링` |
| `docs` | 문서 수정 | `docs #456: Git Flow 가이드 문서 작성` |
| `test` | 테스트 추가/수정 | `test #567: 대상자 등록 API 테스트 추가` |
| `style` | 코드 포맷팅, 세미콜론 누락 등 (기능 변경 없음) | `style: Prettier 포맷팅 적용` |
| `chore` | 빌드 업무 수정, 패키지 매니저 설정 등 | `chore: pnpm 의존성 업데이트` |
| `perf` | 성능 개선 | `perf #678: 데이터베이스 쿼리 최적화` |
| `ci` | CI 설정 변경 | `ci: GitHub Actions 워크플로우 추가` |
| `build` | 빌드 시스템 변경 | `build: Next.js 16으로 업그레이드` |
| `revert` | 이전 커밋 되돌리기 | `revert #789: 잘못된 커밋 되돌리기` |

---

## 좋은 커밋 메시지 예시

### ✅ 예시 1: 기능 추가 (상세)

```
feat #123: 대상자 등록 API 구현

POST /api/clients 엔드포인트를 추가하여 새로운 대상자를 등록할 수 있도록 함.

- Zod 검증 스키마 구현 (clientSchema)
- 애플리케이션 레벨 접근 제어 적용 (admin, leader, specialist만 가능)
- 감사 로그 기록 (auditLogger.info)
- Jest 테스트 작성 (80% 커버리지)
```

**왜 좋은가?**
- 명확한 기능 설명
- 변경 사항이 구체적으로 나열됨
- 이슈 번호 포함 (#123)
- 관련 기술 스택 언급

### ✅ 예시 2: 버그 수정 (간단)

```
fix #234: API 에러 핸들링 개선

500 에러 발생 시 클라이언트에게 적절한 에러 메시지 반환

- try-catch 블록 추가
- 에러 타입별 메시지 분기
- 감사 로그 기록
```

**왜 좋은가?**
- 문제 상황 명확히 설명
- 해결 방법 간단히 설명
- 관련 변경 사항 포함

### ✅ 예시 3: 리팩토링 (상세)

```
refactor #345: 클라이언트 폼 컴포넌트 리팩토링

React Hook Form으로 마이그레이션하여 폼 상태 관리 개선

- useState 기반 폼을 React Hook Form으로 교체
- 검증 로직을 Zod 스키마로 분리
- 타입 안정성 개선 (any 타입 제거)
- 폼 제출 성능 최적화
```

**왜 좋은가?**
- 리팩토링 목적 명확
- 변경 전후 비교 가능
- 개선 사항 구체적으로 설명

### ✅ 예시 4: 문서 수정

```
docs #456: Git Flow 가이드 문서 작성

프로젝트의 Git Flow 브랜치 전략을 문서화

- 브랜치 전략 개요 작성
- 각 브랜치 유형별 사용법 설명
- 워크플로우 다이어그램 추가
- 실전 예시 코드 포함
```

**왜 좋은가?**
- 문서 목적 명확
- 문서 내용 요약
- 이슈 번호 포함

---

## 나쁜 커밋 메시지 예시

### ❌ 예시 1: 모호한 메시지

```
수정했습니다
```

**문제점:**
- 무엇을 수정했는지 불명확
- TYPE 누락
- 이슈 번호 없음

**개선 방법:**
```
fix #234: API 에러 핸들링 개선
```

### ❌ 예시 2: 너무 긴 제목

```
feat #123: 대상자 등록 API를 구현하고 Zod 검증 스키마를 추가하고 Jest 테스트를 작성하고 감사 로그를 기록하는 기능을 추가했습니다
```

**문제점:**
- 제목이 너무 김 (50자 초과)
- 한 줄에 모든 내용 포함

**개선 방법:**
```
feat #123: 대상자 등록 API 구현

- Zod 검증 스키마 추가
- Jest 테스트 작성
- 감사 로그 기록
```

### ❌ 예시 3: 이슈 번호 없음

```
feat: 대상자 등록 기능 추가
```

**문제점:**
- 이슈 번호 없음 (가능한 경우 포함해야 함)
- 기능 설명이 너무 간단

**개선 방법:**
```
feat #123: 대상자 등록 API 구현

POST /api/clients 엔드포인트 추가
```

### ❌ 예시 4: 과도한 이모지 사용

```
✨🎉🚀 feat: 대상자 등록 기능 추가 🎊🔥💯
```

**문제점:**
- 이모지 남용 (간단한 이모지는 허용하지만 과도한 사용은 피해야 함)
- 정보 전달에 방해

**개선 방법:**
```
feat #123: 대상자 등록 API 구현
```

### ❌ 예시 5: TYPE 오용

```
fix: 새로운 검색 필터 기능 추가
```

**문제점:**
- `fix`는 버그 수정용인데 기능 추가에 사용됨
- 올바른 TYPE: `feat`

**개선 방법:**
```
feat #123: 검색 필터 기능 추가
```

---

## 커밋 템플릿 사용법

### 1. 템플릿 설정

프로젝트 루트에 `.gitmessage` 파일이 있습니다. 이를 Git 커밋 템플릿으로 설정하세요:

```bash
git config commit.template .gitmessage
```

### 2. 커밋 작성

템플릿을 설정한 후, 커밋을 작성하면 템플릿이 자동으로 열립니다:

```bash
git commit
```

### 3. 템플릿 내용 수정

템플릿이 열리면:
1. `[TYPE]`을 적절한 타입으로 교체 (feat, fix, refactor 등)
2. `ATCMP-XXX` 또는 `#이슈번호`를 실제 이슈 번호로 교체
3. 간단한 설명 작성
4. 필요시 상세 설명 및 변경 사항 추가

### 4. 예시

템플릿이 열리면 다음과 같이 수정:

```
feat #123: 대상자 등록 API 구현

POST /api/clients 엔드포인트를 추가하여 새로운 대상자를 등록할 수 있도록 함.

- Zod 검증 스키마 구현
- 애플리케이션 레벨 접근 제어 적용
- 감사 로그 기록
- Jest 테스트 작성
```

---

## 베스트 프랙티스

### 1. 제목 작성 규칙

- **길이**: 50자 이내
- **형식**: `[TYPE] #이슈번호: 설명`
- **문법**: 명령형으로 작성 (예: "구현" not "구현함")
- **대소문자**: 첫 글자만 대문자 (예: "API 구현" not "API 구현")

### 2. 본문 작성 규칙

- **길이**: 72자 단위로 줄바꿈
- **내용**: 변경 이유와 방법 설명
- **형식**: 불릿 포인트 사용 (가독성 향상)

### 3. 이슈 번호 포함 규칙

- **필수**: 가능한 경우 항상 이슈 번호 포함
- **형식**: `#이슈번호` (GitHub Issues 자동 연결)
- **예외**: 매우 작은 변경사항은 생략 가능 (예: 오타 수정)

### 4. 커밋 단위

- **원칙**: 하나의 커밋은 하나의 논리적 변경사항만 포함
- **예시**: 
  - ✅ 좋음: "feat #123: 대상자 등록 API 구현"
  - ❌ 나쁨: "feat #123: 대상자 등록 API 구현 및 검색 필터 추가"
- **이유**: 커밋 히스토리 추적 용이, 롤백 용이

### 5. 커밋 빈도

- **작은 단위**: 기능 단위로 자주 커밋
- **테스트 통과**: 커밋 전 로컬 테스트 통과 확인
- **리뷰 준비**: PR 제출 전 의미 있는 커밋으로 정리

### 6. 변경 사항 나열

- **형식**: 불릿 포인트 사용 (`-` 또는 `*`)
- **순서**: 중요도 순 또는 논리적 순서
- **구체성**: "API 구현" 보다는 "POST /api/clients 엔드포인트 추가"

### 7. 타입 선택 가이드

| 상황 | TYPE | 예시 |
|------|------|------|
| 새로운 기능 추가 | `feat` | `feat #123: 사용자 인증 기능 추가` |
| 버그 수정 | `fix` | `fix #234: 로그인 오류 수정` |
| 코드 구조 개선 | `refactor` | `refactor #345: 컴포넌트 분리` |
| 문서 업데이트 | `docs` | `docs #456: README 업데이트` |
| 테스트 추가 | `test` | `test #567: API 테스트 추가` |
| 코드 스타일 변경 | `style` | `style: Prettier 포맷팅` |
| 빌드/도구 설정 | `chore` | `chore: pnpm 업데이트` |
| 성능 개선 | `perf` | `perf #678: 쿼리 최적화` |

---

## 체크리스트

커밋 메시지를 작성할 때 다음을 확인하세요:

- [ ] TYPE이 올바른가? (feat, fix, refactor 등)
- [ ] 이슈 번호가 포함되었는가? (가능한 경우)
- [ ] 제목이 50자 이내인가?
- [ ] 제목이 명확하고 간결한가?
- [ ] 본문이 72자 단위로 줄바꿈되었는가?
- [ ] 변경 사항이 구체적으로 나열되었는가?
- [ ] 불필요한 이모지나 장식이 없는가?

---

## 참고 자료

- [커밋 메시지 템플릿](../.gitmessage)
- [Git Flow 가이드](./git-flow-guide.md)
- [PROJECT_MANAGEMENT_SYSTEM.md](../PROJECT_MANAGEMENT_SYSTEM.md)
- [CONTRIBUTING.md](../CONTRIBUTING.md)

---

## 추가 리소스

### 외부 자료

- [Conventional Commits](https://www.conventionalcommits.org/)
- [How to Write a Git Commit Message](https://chris.beams.io/posts/git-commit/)
- [Git 커밋 메시지 작성 가이드 (한국어)](https://meetup.toast.com/posts/106)

---

**마지막 업데이트**: 2025-11-01  
**다음 검토일**: 2026-02-01

